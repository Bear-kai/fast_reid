1. 测试视频：
	2020.10.22日晚间20:30采集，云埔园区小花园
	
2. 行进速度：
	speed00--静止，speed05--0.5m/s，speed10--1m/s
	
3. 匹配阈值：
	T90--相似度阈值超过0.9时，认为新检测到的行人，和之前检测到的行人匹配上；
	T94同理；
	
4. 检测阈值：
	Yolo行人检测，置信度阈值0.7（置信度大于0.7时才认为检测到人）

4. 处理帧率：
	3路视频，每路均为隔10帧处理一帧；

5. 观看说明：
	右下大窗口中，1个小窗口表示1个ID，行人画面越连续越好，出现跳变则表示匹配错误；
	若ID小窗口的数目大幅增加，则表示同一个ID被当成了多个ID（比如正面和背面匹配不上，分别作为2个ID）
	若一个ID连续N个处理帧未被匹配，则删除该ID。
	
	
附录0：
	demo1.0所用的ReID模型，是[上海交大]和[云从科技]提出来的一种方法;
	在公开market1501数据集上具有SOTA性能，但是模型太大（存储805M，不够实用）；
	基于ReID的行人去重，ReID模型仅仅用于提取行人的特征，因此ReID模型的性能并不直接对应到最终的去重指标。
	
	
附录1：去重逻辑[v1.0]（及时报警，gallery中每个ID仅维护一个特征向量）

	A. 系统启动[eg.0~5min]

	1）初始gallery
		假设第i个处理帧时，首次有检测结果返回，记cam1, cam2, cam3分别返回a,b,c个行人patch;
	    提取这些patch的ReID特征，存入gallery，每个特征对应一个ID; 
	   （注：相邻两cam可能有overlap，初始建库时最多有(a+b+c)个ID，同一时刻具体几人不影响：合并报警1次）
	   
	2）gallery更新
		从第i+1帧开始，对于检测到的行人patch，作为query
		若和gallery中的ID特征匹配成功（高于相似度阈值），认为是旧ID，此时该ID特征为：该ID特征和该query特征的均值；
		若未匹配成功，认为是新ID，此时直接将query特征添加进gallery；
		（注：这里gallery的更新逻辑，天然地更关注ID的近期特征，并逐渐遗忘过去特征）
	
	
	B. 系统运行[>5min]	
	 
	 1）ID存活校验
		 gallery中的每个ID有一个时间戳，记录最近一次的更新时间，若该时间为阈值[eg.5min]之前，则删掉该ID。
		 若gallery为空，则进入系统启动步骤，等待新的检测结果并重新建库
	 
	 2）[特征池]更新——该模块属于[v1.1]
		 每个特征同样有一个时间戳，将5min之前的行人特征去掉，存入新返回的行人特征。
		 若特征池为空，同样将delta置零
		 
	 3）聚类校验——该模块属于[v1.1]
		先验假设：对历史样本的聚类优于上述单个样本的检索匹配
		[特征池]存储不断返回的行人图片特征，
		若图片数的增量(delta)和绝对数量(N)，均大于阈值(eg.50)，则启动聚类，并用聚类中心替换gallery。
		（注：增量delta具体指，从开机或从上一次聚类开始，新增的行人patch数目，这里的时间跨度可能大于5min；
			  由于特征池仅含有最近5min的行人特征，所以得同时考虑绝对数量N，以保证聚类时[特征池]中至少有N个行人特征；  
			  操作上，可在每次聚类时，将delta置零）
	 
	C. 关于聚类模块的说明

	 1）不加聚类模块
		 能给出预测的ID数，及对应的报警数目；
		
	 2）引入聚类模块
		 仅给出报警数目；原因:
		 聚类只是用来辅助gallery的更新；聚类不是为了纠正当前帧以前的错误，而是为了减少当前帧以后的错误；
		 而且也无法很好地进行聚类前后的ID号对应，即ID并没有延续性，无法给出预测的ID数。
	 
	 
附录2：去重逻辑v2.0（及时报警；gallery中每个ID仅维护一个特征向量；引入跟踪算法）
	
	跟出很多track（第0帧检测，第1~9帧跟踪，第10帧检测，第11~19帧跟踪... ?），
	然后利用ReID模型合并同ID的track（set2set匹配）
	待续...
	
	
附录3：纯业务层面的去重
	
	检测bbox数目的“上升沿”：
	方案a.检测到上升沿则报警
		  比如当前帧的bbox数目为a，下一帧的bbox数目为b，若b>a，则报警+1，且将a置为b；若b<a，不报警，且将a置为b;
	方案b.检测到上升沿且持续N帧则报警
		  比如当前帧的bbox数目为a，后面N=2帧的bbox数目为b,c，若b=c>a，报警+1，且将a置为b; 若b=c<a，不报警，且将a置为b；
	方案c. (考虑confidence score、考虑IOU) ...
	
	总之一个原则：统计和分析实际的误报警情况，设计规则过滤之。

	